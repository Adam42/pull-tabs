!function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=16)}([function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=a||{updateStatusMessage:function(e,t,n){var a=document.getElementById("status"),s=document.createElement("p"),i="alert-"+n;if(s.classList.add("alert",i),a.classList.remove("hidden"),a.style.top=0,s.textContent=e,"object"===(void 0===e?"undefined":o(e))&&e instanceof HTMLElement&&(s.textContent="",s.appendChild(e)),s.id="status-message-"+a.children.length,a.children.length>0){var r=a.lastChild.id;r=r.replace("status-message-",""),r=parseInt(r)+1,s.id="status-message-"+r}switch(a.appendChild(s),t){case"short":setTimeout(this.removeStatusMessage,2e3,s.id);break;case"medium":setTimeout(this.removeStatusMessage,4e3,s.id);break;case"long":setTimeout(this.removeStatusMessage,8e3,s.id);break;case"dependent":return s.id;case"restack":break;default:setTimeout(this.removeStatusMessage,3e3,s.id)}},removeStatusMessage:function(e){null===typeof e&&(e="status-message-0");var t=document.getElementById(e),n=t.parentNode;t.remove(),n.children.length<=0&&n.classList.add("hidden")}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n(0),a=(n(2),n(3)),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(7),r={init:function(){var e=this;if(this.isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,void 0===localStorage.pullTabsFolderId){browser.bookmarks.getTree().then(function(t){e.findPulltabsBookmarkFolder(t)})}},isFile:function(e){return e.split("/").pop().split(".").length>1},updateUI:function(e,t,n){if("fail"===n)return r.updateSimpleUI(e,t,"danger"),void r.updateAdvancedUI(e,"failed");r.updateAdvancedUI(e,"successful"),r.updateSimpleUI(e,t,n)},updateSimpleUI:function(e,t,n){var a=document.createElement("span"),s=document.createElement("a"),i=document.createTextNode(t);s.title=e.title.toString(),s.href=e.url,s.textContent=e.title.toString(),a.appendChild(i),a.appendChild(s);var r="short";"danger"===n&&(r="long"),o.a.updateStatusMessage(a,r,n)},updateAdvancedUI:function(e,t){void 0!==e.labelTabId&&null!==e.labelTabId&&a.a.setLabelStatus(e,t)},watchDownloads:function(e){browser.downloads.onChanged.addListener(r.handleChanged)},handleChanged:function(e){browser.storage.local.get({downloadItemToTabMap:""}).then(function(t){var n=t.downloadItemToTabMap[e.id];e.state&&"complete"===e.state.current&&r.updateUI(n,"Completed downloading ","success"),e.state&&"interrupted"===e.state.current&&r.updateUI(n,"Error: failed downloading ","fail")})},downloadUrls:function(e){this.watchDownloads();var t={downloadItemToTabMap:{}};e.forEach(function(e){var n=this;if("about:"!==e.url.substring(0,6)){this.downloadUrl(e).then(function(o){e.downloadItemId=o,t.downloadItemToTabMap[o]=e,browser.storage.local.set(t),n.updateUI(e,"Started downloading ","info")}).catch(function(t){n.updateUI(e,"fail")});e.active,1}},this)},downloadUrl:function(e){var t={url:e.url};return r.isFile(e.url)||(t.filename=i(e.title.toString())+".html"),r.isFirefox||(t.method="GET"),browser.downloads.download(t)},getTabs:function(){return new Promise(function(e,t){var n={currentWindow:!0};chrome.tabs.query(n,function(n){if("object"===(void 0===n?"undefined":s(n)))return void e(n);t(Error("Couldnt get tabs"))})})},findPulltabsBookmarkFolder:function(e){var t,n=e[0].children[1],o=n.children.length;for(t=0;t<o;t++){if("Pulltabs"===n.children[t].title){this.saveBookmarkFolder(n.children[t].id);break}if(t==o-1){var a={parentId:n.id,title:"Pulltabs"};this.createPulltabsBookmarkFolder(a)}}},createPulltabsBookmarkFolder:function(e){var t=this;browser.bookmarks.create(e).then(function(e){t.saveBookmarkFolder(e.id)}).catch(function(e){})},saveBookmarkFolder:function(e){localStorage.pullTabsFolderId=e},closeTabs:function(e){var t,n=e.length;for(t=0;t<n;t++)this.closeTab(e[t])},closeTab:function(e){browser.tabs.remove(e.id)},bookmarkTabs:function(e){var t,n=e.length;for(t=0;t<n;t++)this.bookmarkTab(e[t])},bookmarkTab:function(e){var t={parentId:localStorage.pullTabsFolderId,title:e.title.toString(),url:e.url};browser.bookmarks.create(t).then(function(t){var n=document.createElement("a"),a=document.createElement("span"),s=document.createTextNode("Successfuly bookmarked ");n.title=e.title.toString(),n.href=e.url,n.textContent=e.title.toString(),a.appendChild(s),a.appendChild(n),r.updateAdvancedUI(e,"successful"),o.a.updateStatusMessage(a,"medium","success")})},login:function(e){var t=browser.extension.getURL("pocket.html");e.auth=e.auth+encodeURIComponent(t),window.open(e.auth)},loginViaWebAuthFlow:function(e){e.auth=e.auth+encodeURIComponent(browser.identity.getRedirectURL()),e.interactive=!0;var t={url:e.auth,interactive:e.interactive};chrome.identity.launchWebAuthFlow(t,function(t){Pocket.getAccessToken(e)})},store:function(e){return browser.storage.local.set(e)},save:function(e,t){try{browser.storage.local.set(t,function(){var t=document.getElementById("status");t.textContent=e+" saved.",setTimeout(function(){t.textContent=""},750)})}catch(e){}},retrieve:function(e){return browser.storage.local.get(e)},extensionGetURL:function(e){return browser.extension.getURL(e)}};r.init()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"config",function(){return o});var o=o||function(){return{credentials:{consumer_key:"***REMOVED***"},app:{name:"Pull Tabs"}}}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(5),a=a||{options:"",init:function(e){this.options=e},createForm:function(e){o.a.getOptions.then(function(t){o.a.assembleForm(e,t)}),o.a.watchSubmit(e)},createCheckbox:function(e,t,n){var o=document.createElement("input");return o.type="checkbox",o.id="tab-"+e.index,o.name="tabs"+e.index,o.title=e.title.toString()+t,o.value=e.url.toString(),o.checked=n,o},createRadioInput:function(e,t,n){t=t.toString(),n=n.toString();var o="";t===n&&(o="checked");var a=document.createElement("input");a.type="radio",a.id="tab-pref-"+e.index,a.name="tab-pref-"+e.index,a.value=t,a.checked=o;var s=document.createElement("label");s.setAttribute("class","preferences");var i=document.createElement("span");return i.textContent=t,s.appendChild(i),s.appendChild(a),s},createLabel:function(e,t,n){var o=document.createElement("label");o.setAttribute("class","list-group-item "+n),o.setAttribute("id","label-tab-"+e.index);var a=document.createElement("p");if(a.textContent="Title: "+e.title.toString(),o.appendChild(a),"image"===t.split("/").shift()){var s=document.createElement("img");s.classList.add("img-thumbnail"),s.style="width: 150px; height: 150px;",s.src=e.url.toString(),o.appendChild(s)}return o},toggleLabels:function(e){e.addEventListener("click",function(){var t=e.getElementsByTagName("input")[0];e.classList.contains("active")&&(t.checked||e.classList.remove("active")),e.classList.contains("active")||t.checked&&e.classList.add("active")})},setLabelStatus:function(e,t){var n=document.getElementById("label-tab-"+e.labelTabId);n.setAttribute("class",n.className+" "+t)},updateStatus:function(e,t){var n=document.getElementById("status"),o=document.createElement("a"),a=document.createElement("p"),s=document.createTextNode(t);o.title=e.title.toString(),o.href=e.url.toString(),o.textContent=e.title.toString(),a.appendChild(s),a.appendChild(o),n.appendChild(a),n.removeAttribute("class","hidden")},assembleForm:function(e,t){var n=document.getElementById("resources");e.forEach(function(e){o.a.getContentType(e.url,function(e){this.mType=e});var a=this.mType.split("/").shift().toLowerCase(),s=t[a]?t[a]:"ignore",i="",r="";"download"!==s&&"pocket"!==s||(i="checked",r="active");var c=o.a.createCheckbox(e,a,i),u=o.a.createRadioInput(e,"download",s),l=o.a.createRadioInput(e,"pocket",s),d=o.a.createRadioInput(e,"ignore",s),m=o.a.createLabel(e,a,r);m.appendChild(c),m.appendChild(u),m.appendChild(l),m.appendChild(d),n.appendChild(m)})},getSelectedGroup:function(){document.getElementById()},getSelectedTabs:function(e){var t,n=e.length,o=[],a=[],s=[],i=[],r=[];for(t=0;t<n;t++){if(document.getElementById("tab-"+t).checked){var c,u=document.getElementsByName("tab-pref-"+t);for(e[t].labelTabId=t,c=0;c<u.length;c++)if(u[c].checked){var l=u[c].value;switch(l){case"download":o.push(e[t]);break;case"pocket":a.push(e[t]);break;case"bookmark":s.push(e[t]);break;case"close":i.push(e[t]);break;default:r.push(e[t])}}}else r.push(e[t])}return e.downloads=o,e.pockets=a,e.closes=i,e.bookmarks=s,e.ignores=r,e},watchMutateCheck:function(){var e=document.querySelector("#resources"),t=new MutationObserver(function(e){e.forEach(function(e){var t=document.querySelector("#"+e.addedNodes[0].id+" > input"),n=document.querySelector("#label-"+t.id);n.addEventListener("click",function(){n.classList.contains("active")&&(t.checked||n.classList.remove("active")),n.classList.contains("active")||t.checked&&n.classList.add("active")})})}),n={attributes:!0,childList:!0,characterData:!0};t.observe(e,n)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n(0),a=n(2),s=n(1),i=n(3),r=r||{pocketKey:{access_token:"access_token",user_name:"user_name"},init:function(){if(void 0!==localStorage[this.pocketKey.user_name]&&"user_name"!==localStorage[this.pocketKey.user_name])return void this.isAuthorized();this.isNotAuthorized()},checkLocalLoginStatus:function(){if(void 0!==localStorage[this.pocketKey.user_name]&&"user_name"!==localStorage[this.pocketKey.user_name])return void this.isAuthorized();this.isNotAuthorized()},isAuthorized:function(){var e=document.getElementById("pocket-status");null!==e&&(e.href="#pocket-logout",e.textContent="You are signed in as "+decodeURIComponent(localStorage[this.pocketKey.user_name])+" Click to log out.")},isNotAuthorized:function(){var e=document.getElementById("pocket-status");e.href="#pocket-login",e.textContent="You are not authorized, please sign in."},logOut:function(){localStorage[this.pocketKey.user_name]="user_name",localStorage[this.pocketKey.access_token]="access_token",chrome.storage.local.set({access_token:"access_token",user_name:"user_name"},function(e){}),this.isNotAuthorized()},checkLink:function(e){var t=e.target.href.indexOf("#")+1;if("pocket-logout"===e.target.href.substring(t))return void r.logOut();r.initLogin()},initLogin:function(){var e={};e.url="https://getpocket.com/v3/oauth/request",e.key=a.config.credentials.consumer_key,r.getRequestToken(e)},saveTabToPocket:function(e){var t=e.url,n={url:t,consumer_key:a.config.credentials.consumer_key,access_token:localStorage[this.pocketKey.access_token]};try{var s=new XMLHttpRequest;s.overrideMimeType("application/json"),s.open("POST","https://getpocket.com/v3/add",!1),s.setRequestHeader("Content-Type","application/json; charset=UTF-8"),s.setRequestHeader("X-Accept","application/json");var r,c=document.createElement("a"),u=document.createElement("span");c.title=e.title.toString(),c.href=e.url,c.textContent=e.title.toString(),s.onreadystatechange=function(){if(4===s.readyState&&200!==s.status)return void 0!==e.labelTabId&&null!==e.labelTabId&&i.a.setLabelStatus(e,"failed"),r=document.createTextNode("Failed saving to Pocket "),u.appendChild(r),u.appendChild(c),o.a.updateStatusMessage(u,"long","danger"),!1;if(4===s.readyState&&200===s.status){void 0!==e.labelTabId&&null!==e.labelTabId&&i.a.setLabelStatus(e,"successful"),r=document.createTextNode("Saved this tab to pocket: "),u.appendChild(r),u.appendChild(c),o.a.updateStatusMessage(u,"medium","success");return!0}},s.onerror=function(t){i.a.setLabelStatus(e,"failed")},s.send(JSON.stringify(n))}catch(t){return i.a.setLabelStatus(e,"failed"),!1}},saveTabsToPocket:function(e){var t,n=e.length;for(t=0;t<n;t++)this.saveTabToPocket(e[t])},getRequestToken:function(e){var t=chrome.extension.getURL("pocket.html"),n=new FormData;n.append("consumer_key",e.key),n.append("redirect_uri",encodeURIComponent(t));var o=new XMLHttpRequest;o.open("POST",e.url,!0),o.onload=function(t){4===o.readyState&&200===o.status&&(e.token=o.response.substring(5),localStorage[r.pocketKey.request_token]=e.token,e.auth="https://getpocket.com/auth/authorize?request_token="+e.token+"&redirect_uri=",s.a.login(e))},o.onerror=function(e){},o.send(n)},getStoredCredentials:function(e){chrome.storage.local&&chrome.storage.local.get({access_token:"access_token",user_name:"user_name"},function(e){"user_name"!==e.user_name?r.isAuthorized(e):r.isNotAuthorized()})},setStoredCredentials:function(e){var t=e.search("=")+1,n=e.search("&"),o=n+10,a=e.substring(t,n),s=e.substring(o);localStorage[this.pocketKey.access_token]=a,localStorage[this.pocketKey.user_name]=s,this.isAuthorized()},getAccessToken:function(e){var e={};e.url="https://getpocket.com/v3/oauth/authorize",e.key=a.config.credentials.consumer_key,e.token=localStorage[this.pocketKey.request_token];var t=new FormData;t.append("consumer_key",e.key),t.append("code",e.token);var n=new XMLHttpRequest;n.open("POST",e.url,!0),n.onload=function(e){4===n.readyState&&200===n.status&&r.setStoredCredentials(n.response)},n.onerror=function(e){},n.send(t)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(1),a=n(6),s=n(3),i=n(0),r=n(4),c=c||{tabs:"",prefs:"",layout:"",mimeTypesMap:{},init:function(){if("no"!==localStorage.initialSetup)return localStorage.initialSetup="yes",void c.doInitialSetup();if(!c.tabs){var e=i.a.updateStatusMessage("Gathering your tabs","dependent","info");return void o.a.getTabs().then(function(t){return c.tabs=t,i.a.removeStatusMessage(e),t}).then(function(e){c.setNumTabs(e)}).then(c.getLayout().then(function(e){c.setLayout(e),c.displayLayout()})).catch(function(e){})}},doInitialSetup:function(){if(null===document.getElementById("setup")){var e=document.createElement("a");e.href=o.a.extensionGetURL("options.html"),e.id="initial-load",e.textContent=" Setup PullTabs with your preferences.";var t=document.createElement("p");t.classList.add("alert","alert-info"),t.textContent="This appears to be your first time using PullTabs. Please visit the options page to define your preferences and setup any external services you wish to use.",t.id="setup",t.appendChild(e);var n=document.getElementById("simple").parentNode,a=document.getElementById("simple");n.insertBefore(t,a),t.addEventListener("click",function(e){e.preventDefault(),localStorage.initialSetup="no",browser.runtime.openOptionsPage()})}},displayLayout:function(){if(c.layout.simple)c.watchButtons();else{document.getElementById("simple").classList.add("hidden")}c.layout.advanced&&c.displayAdvancedLayout()},addMimeTypeToTabs:function(){return c.tabs.map(function(e){c.getContentType(e.url).then(function(t){var n="tab"+e.id.toString();c.setMimeTypesMap(n,t)}).catch(function(e){})})},setMimeTypesMap:function(e,t){c.mimeTypesMap[e]=t},displayAdvancedLayout:function(){document.getElementById("advanced").classList.remove("hidden"),this.getOptions().then(function(e){c.setOptions(e)}).then(c.getFullMimeType().then(function(e){e.retrieveFullMimeType?Promise.all(c.addMimeTypeToTabs).then(function(){c.assembleForm(c.tabs,c.pref,c.mimeTypesMap)}):c.assembleForm(c.tabs,c.pref,c.mimeTypesMap)}).then(function(){c.watchSubmit(c.tabs);var e=document.getElementById("resources").getElementsByClassName("list-group-item");c.watchCheckBoxes(e),c.watchMutateCheck(),c.setActions()}))},watchCheckBoxes:function(e){var t;for(t=0;t<e.length;t++)s.a.toggleLabels(e[t])},getUrls:function(e){var t=[];return e.forEach(function(e){t.push(e.url)}),t},setTabs:function(e){this.tabs=e},setNumTabs:function(e){document.getElementById("numTabs").textContent="This window has "+e.length+" tabs. Do this action to all tabs:"},getFullMimeType:function(){return o.a.retrieve(a.a.fullMimeType)},assembleForm:function(e,t,n){e.forEach(function(e){n.length,c.displayDefaultAdvancedLayout(e)})},displayDefaultAdvancedLayout:function(e){var t=document.getElementById("resources"),n="ignore",o="",a="",i=s.a.createCheckbox(e,"unknown",o),r=s.a.createRadioInput(e,"download",n),c=s.a.createRadioInput(e,"pocket",n),u=s.a.createRadioInput(e,"bookmark",n),l=s.a.createRadioInput(e,"close",n),d=s.a.createLabel(e,"unknown",a);d.appendChild(i),d.appendChild(r),d.appendChild(c),d.appendChild(u),d.appendChild(l),t.appendChild(d)},getTabStatus:function(){this.tabs=s.a.getSelectedTabs(this.tabs),this.tabs.downloads.length>0&&o.a.downloadUrls(this.tabs.downloads),this.tabs.pockets.length>0&&r.a.saveTabsToPocket(this.tabs.pockets),this.tabs.closes.length>0&&o.a.closeTabs(this.tabs.closes),this.tabs.bookmarks.length>0&&o.a.bookmarkTabs(this.tabs.bookmarks)},getContentType:function(e){return new Promise(function(t,n){var o=new XMLHttpRequest;o.onload=function(){if(200===o.status){var e=o.getResponseHeader("Content-Type");t(null!==e?e.split(";").shift().split("/").shift().toLowerCase():"unknown")}n(Error(o.statusText))},o.onerror=function(){n(Error(o.statusText))},o.open("HEAD",e),o.send()})},setLayout:function(e){c.layout=e},getLayout:function(){var e={simple:"true",advanced:"false"},t=i.a.updateStatusMessage("Loading layout","dependent","info");return o.a.retrieve(e).then(function(e){return i.a.removeStatusMessage(t),e})},doError:function(e){},getOptions:function(){var e={application:"download",image:"download",message:"ignore",model:"ignore",multipart:"ignore",text:"download",video:"download",unknown:"ignore"};return o.a.retrieve(e)},setOptions:function(e){c.prefs=e},setActions:function(){document.getElementById("check-all-button").addEventListener("click",function(){c.setAllActive()}),document.getElementById("uncheck-all-button").addEventListener("click",function(){c.setAllInactive()})},setAllActive:function(){var e,t=document.querySelectorAll("#resources > label"),n=t.length,o=document.getElementById("list").querySelectorAll("input[type=checkbox]");for(o.forEach(function(e){e.checked=!0}),e=0;e<n;e++)t[e].classList.contains("active")||t[e].classList.add("active")},setAllInactive:function(){var e,t=document.querySelectorAll("#resources > label"),n=t.length,o=document.getElementById("list").querySelectorAll("input[type=checkbox]");for(o.forEach(function(e){e.checked=!1}),e=0;e<n;e++)t[e].classList.contains("active")&&t[e].classList.remove("active")},updateBackground:function(e,t){t.classList.contains("active")&&(e.checked||t.classList.remove("active")),t.classList.contains("active")||e.checked&&t.classList.add("active")},watchMutateCheck:function(){var e=document.querySelector("#resources"),t=new MutationObserver(function(e){e.forEach(function(e){var t=document.querySelector("#"+e.addedNodes[0].id+" > input"),n=document.querySelector("#label-"+t.id);n.addEventListener("click",function(){n.classList.contains("active")&&(t.checked||n.classList.remove("active")),n.classList.contains("active")||t.checked&&n.classList.add("active")})})}),n={attributes:!0,childList:!0,characterData:!0};t.observe(e,n)},process:function(e){e.preventDefault(),c.getTabStatus()},processGroup:function(e){e.preventDefault();document.getElementById("default")},doAction:function(e){e.preventDefault(),c.processButton(this.id)},processButton:function(e){switch(e){case"download":o.a.downloadUrls(c.tabs);break;case"pocket":r.a.saveTabsToPocket(c.tabs);break;case"bookmark":o.a.bookmarkTabs(c.tabs);break;case"close":o.a.closeTabs(c.tabs)}},watchButtons:function(){document.getElementById("download").addEventListener("click",this.doAction),document.getElementById("pocket").addEventListener("click",this.doAction),document.getElementById("bookmark").addEventListener("click",this.doAction),document.getElementById("close").addEventListener("click",this.doAction),document.getElementById("ignore").addEventListener("click",this.doAction)},watchSubmit:function(){document.getElementById("default").addEventListener("submit",this.processGroup),document.getElementById("list").addEventListener("submit",this.process)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(1),a=n(4),s=n(0),i=i||function(){function e(){c.mimeTypes.forEach(function(e){c.mimeSettings[e]=this.tabActions[0]},c)}function t(e){return e.charAt(0).toUpperCase()+e.slice(1)}function n(){for(var e=document.getElementById("file-type-destinations"),n=0;n<c.numOfmimeTypes;n++){var o=document.createElement("div");o.setAttribute("class","panel panel-default row");var a=document.createElement("div");a.setAttribute("class","panel-heading col-md-2");var s=document.createElement("h4");s.textContent=t(c.mimeTypes[n]),a.appendChild(s),o.appendChild(a);var i=document.createElement("div");i.setAttribute("class","panel-body col-md-10");for(var r=0;r<c.numOftabActions;r++){var u=document.createElement("label"),l=document.createElement("input");l.type="radio",l.id=c.tabActions[r],l.name=c.mimeTypes[n],l.value=c.tabActions[r];var d=document.createElement("span");d.textContent=t(c.tabActions[r]),u.appendChild(l),u.appendChild(d),i.appendChild(u)}o.appendChild(i),e.appendChild(o)}}function r(){document.getElementById("settings").addEventListener("submit",c.saveMimeSettings),document.getElementById("pocket-status").addEventListener("click",a.a.checkLink),document.getElementById("full-mime-types").addEventListener("click",c.saveFullMimeType),document.getElementById("simple").addEventListener("click",c.saveLayout),document.getElementById("advanced").addEventListener("click",c.saveLayout),document.getElementById("autoclose").addEventListener("click",c.saveAutoClose)}var c={};return c.mimeTypes=["application","image","message","model","multipart","text","video","unknown"],c.numOfmimeTypes=c.mimeTypes.length,c.mimeSettings={},c.fullMimeType={retrieveFullMimeType:!1},c.layout={simple:!0,advanced:!1},c.autoClose={autoCloseTabs:!1},c.tabActions=["ignore","download","pocket","bookmark","close"],c.tabOptions=["enabled","disabled"],c.numOftabActions=c.tabActions.length,c.init=function(){r(),e(),n(),this.restoreMimeSettings().then(c.setSettings),this.getLayout().then(i.setLayout),this.getAutoClose().then(i.setAutoClose),this.getFullMimeType().then(function(e){i.setFullMimeType(e)}).catch(function(e){}),a.a.checkLocalLoginStatus()},c.getMimeTypes=function(){return c.mimeSettings},c.getMimeSettings=function(){return c.mimeSettings},c.restoreMimeSettings=function(){return o.a.retrieve(c.mimeSettings)},c.setSettings=function(e){for(var t=0;t<c.numOfmimeTypes;t++)for(var n=document.getElementsByName(c.mimeTypes[t]),o=e[c.mimeTypes[t]],a=0;a<n.length;a++)n[a].id===o?(c.mimeSettings[c.mimeTypes[t]]=n[a].id,n[a].checked=!0):n[a].checked=!1},c.setLayout=function(e){var t=document.getElementById("simple"),n=document.getElementById("advanced");!0===e.simple?t.checked=!0:t.checked=!1,!0===e.advanced?n.checked=!0:n.checked=!1},c.setAutoClose=function(e){var t=document.getElementById("autoclose");!0===e.autoCloseTabs&&(t.checked=!0)},c.saveAutoClose=function(){!0===document.getElementById("autoclose").checked?c.autoClose.autoCloseTabs=!0:c.autoClose.autoCloseTabs=!1,o.a.store(c.autoClose).then(function(e){s.a.updateStatusMessage("Autoclose saved.","short","success")}).catch(function(e){s.a.updateStatusMessage("Error:"+e.message,"medium","danger")})},c.saveLayout=function(){var e=document.getElementById("simple"),t=document.getElementById("advanced");!0===e.checked?c.layout.simple=!0:c.layout.simple=!1,!0===t.checked?c.layout.advanced=!0:c.layout.advanced=!1,o.a.store(c.layout).then(function(e){s.a.updateStatusMessage("Layouts saved.","short","success")}).catch(function(e){s.a.updateStatusMessage("Error:"+e.message,"medium","danger")})},c.setFullMimeType=function(e){var t=document.getElementById("full-mime-types");!0===e.retrieveFullMimeType?t.checked=!0:t.checked=!1},c.saveFullMimeType=function(){var e=document.getElementById("full-mime-types").checked;c.fullMimeType.retrieveFullMimeType=!0===e,o.a.store(c.fullMimeType).then(s.a.updateStatusMessage("Full mime type saved.","short","success")).catch(function(e){s.a.updateStatusMessage("Error:"+e.message,"medium","danger")})},c.getFullMimeType=function(){return o.a.retrieve(c.fullMimeType)},c.getLayout=function(){return o.a.retrieve(c.layout)},c.getAutoClose=function(){return o.a.retrieve(c.autoClose)},c.saveMimeSettings=function(e){e.preventDefault();for(var t=0;t<c.numOfmimeTypes;t++)for(var n=document.getElementsByName(c.mimeTypes[t]),a=0;a<c.numOftabActions;a++)n[a].checked&&(c.mimeSettings[c.mimeTypes[t]]=c.tabActions[a]);o.a.store(c.mimeSettings).then(s.a.updateStatusMessage("Mime settings saved","short","success")).catch(function(e){s.a.updateStatusMessage("Error:"+e.message,"medium","danger")})},c}()},function(e,t,n){"use strict";function o(e,t){var n=e.replace(s,t).replace(i,t).replace(r,t).replace(c,t).replace(u,t);return a(n,255)}var a=n(8),s=/[\/\?<>\\:\*\|":]/g,i=/[\x00-\x1f\x80-\x9f]/g,r=/^\.+$/,c=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,u=/[\. ]+$/;e.exports=function(e,t){var n=t&&t.replacement||"",a=o(e,n);return""===n?a:o(a,"")}},function(e,t,n){"use strict";var o=n(9),a=n(10);e.exports=o.bind(null,a)},function(e,t,n){"use strict";function o(e){return e>=55296&&e<=56319}function a(e){return e>=56320&&e<=57343}e.exports=function(e,t,n){if("string"!=typeof t)throw new Error("Input must be string");for(var s,i,r=t.length,c=0,u=0;u<r;u+=1){if(s=t.charCodeAt(u),i=t[u],o(s)&&a(t.charCodeAt(u+1))&&(u+=1,i+=t[u]),(c+=e(i))===n)return t.slice(0,u+1);if(c>n)return t.slice(0,u-i.length+1)}return t}},function(e,t,n){"use strict";function o(e){return e>=55296&&e<=56319}function a(e){return e>=56320&&e<=57343}e.exports=function(e){if("string"!=typeof e)throw new Error("Input must be string");for(var t=e.length,n=0,s=null,i=null,r=0;r<t;r++)s=e.charCodeAt(r),a(s)?null!=i&&o(i)?n+=1:n+=3:s<=127?n+=1:s>=128&&s<=2047?n+=2:s>=2048&&s<=65535&&(n+=3),i=s;return n}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o={init:function(){document.getElementById("options").addEventListener("click",function(e){e.preventDefault(),chrome.runtime.openOptionsPage()})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),a=n(11);document.addEventListener("DOMContentLoaded",function(){a.a.init(),document.getElementById("popup")&&o.a.init()}),chrome.storage.onChanged.addListener(function(e,t){for(var n in e)if(e.hasOwnProperty("key")){e[n]}})},,,,function(e,t,n){n(12),e.exports=n(17)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(4).a.getAccessToken()}]);